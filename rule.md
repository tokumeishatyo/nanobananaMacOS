## 開発方針

### 絶対に守ること

1. **UIと機能の分離** - MVVMパターンを採用
2. **各機能のモジュール化** - 機能ごとにファイルを分割
3. **早めのファイル分割** - 1ファイルが大きくなりすぎないよう、早めに分割を検討する
   - 目安: 1ファイル200〜300行程度を上限とする
   - Python版では`main.py`に書きすぎて管理が困難になった教訓を活かす
4. **ビルド確認はユーザーが行う** - Xcodeでのビルド・動作確認はユーザー側で実施
5. **UI実装を優先** - 全UIの実装が完了するまで機能実装には入らない
6. **選択UIのパターン**
   - **4個以下の選択肢** → segmented picker（横並びボタン）
   - **5個以上の選択肢** → ドロップダウン（Picker）
   - ※全UI実装完了後、ユーザーから具体的な変更箇所の指示あり
   - ※4個の基準は今後変更の可能性あり

### 開発サイクル（厳守）

**実装前に必ずユーザーと意識合わせを行う。**

1. **確認** - 変更内容・影響範囲を報告
2. **意識合わせ** - ユーザーに変更内容を確認し、承認を得る
3. **実装** - 承認を得てから実装
4. **ビルド確認** - ユーザーがXcodeでビルド・動作確認
5. **ドキュメント更新** - 必要に応じてCLAUDE.mdや設計ドキュメントを更新
6. **コミット** - ユーザーの指示でコミット
7. **次の確認へ** - 次の項目の確認に移る

**このサイクルを崩さないこと。**

> **注:** Python版との比較は移植フェーズ完了により不要。機能拡張は独自に実施。

### 追加
1. **新しいファイルを作るとき** - 新規のswift、md、yamlファイルを作成したとき、ファイルの先頭に「rule.mdを読むこと」、というコメントを各形式に合わせた価値で入れること
2. **コミットするとき** - コミット前に、作業内容をdocsフォルダ内の「実装設計_新(現在実装している機能の).md」に追記すること。
3. **プッシュするかはその時時で変わる** - コミットの後、リモートにプッシュするかは時間帯による。ユーザーに確認を取ること

### バージョン管理ルール

Xcodeの **General > Identity** で設定。

**現在のバージョン: 2.0 から開始**（漫画ページコンポーザーがメイン機能となったため）

| 変更内容 | 対象 | 例 |
|---------|------|-----|
| **メジャー機能追加**（メインウィンドウへの機能追加） | Version（メジャー） | 2.0 → 3.0 |
| **機能追加**（詳細ウィンドウへの機能追加） | Version（マイナー） | 2.0 → 2.1 |
| **修正・ビルド** | Build番号 | 1 → 2 |

- Version = `CFBundleShortVersionString`（ユーザーに表示）
- Build = `CFBundleVersion`（内部管理用）